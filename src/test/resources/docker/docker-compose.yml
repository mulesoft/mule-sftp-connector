version: "3"
services:
  squidauth:
      image: "robhaswell/squid-authenticated"
      container_name: squidauth${squidPortAuth}
      ports:
        - "${squidPortAuth}:3128"
      environment:
        SQUID_USERNAME: "foo"
        SQUID_PASSWORD: "bar"
      volumes:
        - ./squid-auth.conf:/etc/squid3/squid.conf
        - /config/test
  openssh-server:
    image: lscr.io/linuxserver/openssh-server:latest
    container_name: openssh${sftpProxyAuth}
    environment:
      PUBLICHOST: localhost
      PUID: 1000
      PGID: 1000
      TZ: Etc/UTC
      SUDO_ACCESS: "true"
      PASSWORD_ACCESS: "true"
      USER_PASSWORD: "test"
      USER_NAME: "mule"
    volumes:
      - /config/test
    ports:
      - "${sftpProxyAuth}:2222"
    restart: unless-stopped